{% extends "base.html" %}
{% block title %}Andy's Trivia Questions{% endblock %}
{% block head %}
{{ super() }}
<link rel="stylesheet" href="/static/css/styles.css">
{% endblock %}
{% block content %}
<h1>Cards</h1>

{% if current_user.is_admin %}
<p>Admin View: Showing all cards</p>
{% endif %}

{% if card and card.front and card.back %}
<h2>Card Details</h2>
<p><strong>Question:</strong> {{ card.front }}</p>
<p><strong>Answer:</strong> {{ card.back }}</p>
<p><strong>Set ID:</strong> {{ card.set_id }}</p>
{% if current_user.is_admin %}
<p><strong>Owner:</strong> {{ card.set.user.name }}</p>
{% endif %}
<div class="dropdown">
    <button class="dropbtn">Actions</button>
    <div class="dropdown-content">
        <a href="/cards/{{ card.id }}/edit">Edit Card</a>
        <a href="/cards/add">Add New Card</a>
    </div>
</div>
{% else %}
{% if cards %}
{% for card in cards %}
<div class="card-item">
    <p><strong>Question:</strong> {{ card.front }}</p>
    <p><strong>Answer:</strong> {{ card.back }}</p>
    {% if current_user.is_admin %}
    <p><strong>Owner:</strong> {{ card.set.user.name }}</p>
    {% endif %}
    <p><a href="{{ url_for('get_card', card_id=card.id) }}">View Details</a></p>
</div>
{% endfor %}
<div>
    <a href="/cards/add">
        <button class="create-card-btn">Add a Card</button>
    </a>
</div>
{% else %}
<div class="no-cards-container">
    <a href="/cards/add">
        <button class="create-card-btn">Create Card</button>
    </a>
</div>
{% endif %}
{% endif %}
{% endblock %}
