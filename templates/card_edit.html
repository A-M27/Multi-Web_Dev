{% extends "base.html" %}
{% block title %}Andy's Trivia Questions{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block content %}

<div class="container">
    <h1>Card Details</h1>
    
    {% if card %}
        <div class="card">
            <h2>Question: {{ card.front }}</h2>
            <p class="answer">Answer: {{ card.back }}</p>
            <p>Set ID: {{ card.set_id }}</p>
            {% if current_user.is_admin %}
                <p class="admin-note">Owner: 
                    {% if card.set and card.set.user %}
                        {{ card.set.user.username }}
                    {% else %}
                        [User/Set Missing]
                    {% endif %}
                </p>
            {% endif %}
        </div>
        
            <h2>Edit Card</h2>
            <form action="/cards/{{ card.id }}/edit" method="post" class="form">
                <div class="form-group">
                    <label for="front">Question:</label>
                    <input type="text" id="front" name="front" value="{{ card.front }}" required>

                <div class="form-group">
                    <label for="back">Answer:</label>
                    <textarea id="back" name="back" required>{{ card.back }}</textarea>
                </div>
                <button type="submit" class="btn">Update Card</button>
            </form>
            
            <form id="deleteForm" action="/cards/{{ card.id }}/delete" method="post" style="margin-top: 15px;" class="form">
                <button type="button" class="btn btn-danger" onclick="confirmDelete()">Delete Card</button>
            </form>
        </div>
        
    {% else %}
        <div class="card">
            <h2>Error: Card Not Found</h2>
            <p>The card you are looking for does not exist.</p>
        </div>
    {% endif %}
</div>

<script>
    function confirmDelete() {
        if (confirm("Are you sure you want to permanently delete this card? This action cannot be undone.")) {
            document.getElementById('deleteForm').submit();
        }
    }
</script>

{% endblock %}
