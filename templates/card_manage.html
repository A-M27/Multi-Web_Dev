{% extends "base.html" %}
{% block title %}Manage Cards{% endblock %}
{% block head %}
{{ super() }}
<script src="/static/scripts/site.js"></script>
{% endblock %}
{% block content %}
<h1>Manage Cards</h1>

<div id="noCardsAlert" class="alert">
    No cards available
</div>

{% if current_user.is_admin %}
<p>Admin View: Showing all cards</p>
{% endif %}

{% if no_cards %}
<script>
    showAlert();
</script>
{% endif %}

<form method="post" action="/cards/add">
    <label for="front">Question:</label><br>
    <input type="text" id="front" name="front" required><br><br>
    <label for="back">Answer:</label><br>
    <input type="text" id="back" name="back" required><br><br>
    <button type="submit">Add Card</button>
    <p>(Set will be auto-assigned to your default set)</p>
</form>

{% if cards %}
{% for card in cards %}
<div class="card-item">
    <p><strong>Question:</strong> {{ card.front }}</p>
    <p><strong>Answer:</strong> {{ card.back }}</p>
    {% if current_user.is_admin %}
    <p><strong>Owner:</strong> {{ card.set.user.name }}</p>
    {% endif %}
    <p><a href="{{ url_for('get_card', card_id=card.id) }}">View Details</a> | 
    <a href="/cards/{{ card.id }}/edit">Edit</a></p>
</div>
{% endfor %}
{% else %}
<p>No cards available for you.</p>
{% endif %}
{% endblock %}
