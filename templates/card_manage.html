{% extends "base.html" %}
{% block title %}Manage Cards{% endblock %}
{% block head %}
    {{ super() }}
{% endblock %}
{% block content %}
<div class="container">
    <h1>Manage Cards</h1>
    {% if no_cards %}
        <div class="card" id="noCardsAlert">No cards available</div>
    {% endif %}
    {% if current_user.is_admin %}
        <p class="admin-note">Admin View: Showing all cards</p>
    {% endif %}
    <form action="/cards/add" method="post" class="card">
        <h2>Add Card</h2>
        <p>(Set will be auto-assigned to your default set)</p>
        <div class="form-group">
            <label for="front">Question:</label>
            <input type="text" id="front" name="front" required>
        </div>
        <div class="form-group">
            <label for="back">Answer:</label>
            <textarea id="back" name="back" required></textarea>
        </div>
        <button type="submit" class="btn">Add Card</button>
    </form>
    {% if cards %}
        <div class="cards-grid">
            {% for card in cards %}
                <div class="card">
                    <h3>Question: {{ card.front }}</h3>
                    <p class="answer">{{ card.back }}</p>
                    {% if current_user.is_admin %}
                        <p class="admin-note">Owner: {{ card.set.user.username }}</p>
                    {% endif %}
                    <a href="/card/{{ card.id }}" class="btn">View Details</a>
                    <a href="/card/{{ card.id }}/edit" class="btn">Edit</a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="card">No cards available for you.</p>
    {% endif %}
</div>
<script>
    // Auto-hide alert if present
    showAlert('noCardsAlert');
</script>
{% endblock %}
